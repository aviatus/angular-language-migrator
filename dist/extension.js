(()=>{"use strict";var e={496:e=>{e.exports=require("vscode")},147:e=>{e.exports=require("fs")},17:e=>{e.exports=require("path")}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=r(147),a=r(17),n=r(496),{readdir:i}=t.promises;let s=new Map;const c="0000",l=["a","h1","h2","h3","h4","h5","h6","p","span"],g=[">","<","{{","}}"];function u(e){return e.split(".")[0].toUpperCase().replace(/-/g,"_")}async function p(e){const t=await i(e,{withFileTypes:!0}),r=await Promise.all(t.filter((e=>e.name.endsWith(".html")||e.isDirectory())).map((t=>{const r=a.resolve(e,t.name);return t.isDirectory()?p(r):r})));return Array.prototype.concat(...r)}e.activate=function(e){console.log("Angular Language Migrator activated!");let r=n.commands.registerCommand("angular-language-migrator.startMigration",(()=>{if(n.window.showInformationMessage("HTML Scanning Started..."),void 0!==n.workspace.workspaceFolders){const e=n.workspace.workspaceFolders[0].uri.fsPath+"/src",r=p(e);Promise.resolve(r).then((e=>{Array.isArray(e)||(e=[e]),e.forEach((e=>async function(e){const r=u(a.parse(e).base);let o="";{const t=e.split("\\").findIndex((e=>"app"===e));o=t>0?u(e.split("\\")[t+1])+"_":""}t.readFile(e,"utf-8",((a,n)=>{let i=function(e){const t=l.map((t=>e.match(function(e){return new RegExp(`<${e}.*>(.*?)</${e}>`,"g")}(t))));let r=[].concat.apply([],t).filter((e=>e));return r&&(r=r.map((e=>e.replace(/<\/?[^>]+(>|$)/g,""))).filter((e=>e))),r.filter((e=>g.every((t=>!e.includes(t)))))}(n);if(i.length>0){const a=[...new Map(i.map(((e,t)=>[o+r+"_"+c.substring(0,c.length-t.toString().length)+t.toString(),e])))];s=new Map([...s].concat(a));{let r="";i.forEach((e=>{return r=n.replace(e,""+(t=a,o=e,[...t].find((([,e])=>o===e))?.[0]));var t,o})),t.writeFile(e,r,"utf8",(e=>{if(e)return console.error(e)}))}}}))}(e))),console.log("Scanning Successfully Completed")})),setTimeout((()=>{console.log("Language Migration File Creation Started..."),t.writeFile(e+"/language-output.json",JSON.stringify(Object.fromEntries(s)),(()=>{console.log("Language Migration File Creation Completed...."),n.window.showInformationMessage("Language Migration Completed.")}))}),1e3)}else{const e="Angular Language Migrator: Working folder not found, open a folder an try again";n.window.showErrorMessage(e)}}));e.subscriptions.push(r)},e.deactivate=function(){console.log("Angular Language Migrator deactivated!")}})(),module.exports=o})();